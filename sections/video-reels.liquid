<style>
      *,
      *::before,
      *::after {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        list-style-type: none;
        text-decoration: none;
      }
      :root {
        --primary: #000000;
        --white: #ffffff;
        --bg: #f5f5f5;
      }
      .container {
        max-width: 1600px;
        padding: 0 1rem;
        margin: 0 auto;
      }


      #tranding {
        padding: 2rem 0;
        overflow:hidden;
      }

      @media (max-width: 1440px) {
        #tranding {
          padding: 4rem 0;
        }
      }

      #tranding .tranding-slider {
        padding: 2rem 0;
        position: relative;
      }
      .tranding-slide {
        position: relative;
      }
      .tranding-slide .tranding-slide-img video {
        width: 100%;
        height: auto;
        border-radius: 1.8rem;
        object-fit: cover;
      } .swiper-slide-shadow-left,
      .swiper-slide-shadow-right {
        display: none;
      }
      .shoppable-video .swiper-button-next {
        right: 3% !important;
      }
      .shoppable-video .swiper-button-prev {
        left: 3% !important;
      }
      .shoppable-video .slider-arrow {
        background: var(--white);
        width: 3.5rem;
        height: 3.5rem;
        border-radius: 50%;
        left: 42%;
        transform: translateX(-42%);
        filter: drop-shadow(0px 8px 24px rgba(18, 28, 53, 0.1));
      }
      .shoppable-video .slider-arrow ion-icon {
        font-size: 2rem;
        color: #222224;
      }
      .shoppable-video .swiper-pagination {
       position: absolute;
        width: 15rem;
        bottom: 1rem;
        left: 50%;
        transform: translateX(-50%);
        bottom: 0;
      }
      .shoppable-video .swiper-pagination .swiper-pagination-bullet {
        background:#fff;
        border:1px solid #000;
        margin: 0 5px;
      }

      .shoppable-video
        .swiper-pagination
        .swiper-pagination-bullet-active {
        background: var(--primary);
      }

  /* ----------product--------- */
 .tranding-slide-content{
   display:none;
    border: 1px solid #0000003f;
    border-radius: 1.4rem;
    padding: 5px;
  }
  .swiper-slide-active .tranding-slide-content{
    display:block;
    margin-top: 10px;
  }
  .tranding-slide-product-content{
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 5px;
  }
.tranding-slide-content-bottom{
    display: flex;
    justify-content: space-between;
    align-items: center;
}
  .tranding-slide .tranding-slide-img{
    transform: scale(0.8) !important;     
  }  
   .swiper-slide-active.tranding-slide .tranding-slide-img{
    transform: scale(1) !important;
  } 
  .tranding-slide-produc-img{
    display: flex;
    align-items: center;
    min-width: 90px;
}
  .tranding-slide-produc-img img{
    max-height:100px;
    object-fit:contain;
    border-radius:1.5rem;
  }
  .swiper-slide.tranding-slide.swiper-slide-next {
    transform: translateX(18px);
}
  .swiper-slide.tranding-slide.swiper-slide-prev {
    transform: translateX(-18px);
}
 .shoppable-video .quick-add__submit{
   min-width: 0;
    min-height: 0;
    padding: 12px;
    height: 40px;
    width: 40px;
    border-radius: 50%;
 }
  .shoppable-video .slider-button {
    background: #ffffff;
    color: #000000;
    width: 40px;
    height: 40px;
    border-radius: 50%;
}
  .shoppable-video .slider-button .icon {
    height: 1.1rem;
}
  .slider-product-item{
    max-width:90%;
  }
  .slider-product-img img{
    max-width:100%;
    height:auto;
    
  }
.tranding-slide-product-detailes{
      padding-left: 7px;
}
  .video-reels-product_vendor{
  font-size: 12px; 
} 
  .video-reels-product_title {
  font-size: 12px;
  font-weight: 500;
  margin: 5px 0 10px 0;
  color: #2c004c;
  line-height:16px;
   display: -webkit-box;
  -webkit-line-clamp: 2; /* Show max 2 lines */
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  max-height: 32px; /* 2 lines Ã— 16px line-height */
  
}

.video-reels-product_price {
  font-size: 16px;
  margin: 0;
  display: flex;
  align-items: center;
  gap: 6px;
  line-height:18px;

}

.video-reels-product_price span:first-child {
  color: #cc0000; 
}

.video-reels-product_price span:last-child {
  text-decoration: line-through;
  color: #9a87af;
  font-size: 13px;
}
  @media screen and (max-width:768px){
    .tranding-slide-produc-img {
      min-width: 80px;
    }
  }
  @media screen and (max-width:450px){
    .tranding-slide-produc-img {
      min-width: 75px;
    }
.video-reels-product_vendor{
  font-size: 12px; 
}    
.video-reels-product_title {
  font-size: 12px; 
  margin: 2px 0 6px 0;
  line-height:13px;
  max-height: 26px; 
}

.video-reels-product_price {
  font-size: 12px;
  gap: 1px;
  line-height:14px;
}
.video-reels-product_price span:last-child {
  font-size: 12px;
}
 .tranding-slide-product-content svg {
    width: 20px;
    height: 20px;
}
  }
  .section-heading.centered {
    justify-content: center;
}
  .section-heading.centered h2 {
    padding-right: 0;
}
</style>


<section id="tranding" class="shoppable-video">
        {% if section.settings.title != blank %}
      <div class="section-heading wide-container centered" data-cc-animate>
        <h2 class="h2">{{ section.settings.title | escape }}</h2>
      </div>
    {% endif %}
  <div class="container">
    <div class="swiper tranding-slider">
      <div class="swiper-wrapper">
        {% for block in section.blocks %}
          <div class="swiper-slide tranding-slide">
            <div class="tranding-slide-img">
              {{ block.settings.video | video_tag: autoplay: false, loop: true, muted: true, width: 500, loading: "lazy" }}
            </div>
            <div class="tranding-slide-content">
              <div class="tranding-slide-content-bottom">
                  {% if block.settings.product != blank  %}
                      <div class="tranding-slide-product-content">
                        <div class="tranding-slide-produc-img">
                          <a href="{{ block.settings.product.url }}">
                            
                          {{ block.settings.product.featured_image | image_url: width:100 | image_tag: loading: "lazy" }}
                          </a>
                        </div>
                        <div class="tranding-slide-product-detailes">
                          <p class="video-reels-product_vendor">{{ block.settings.product.vendor }}</p>
                          <a class="video-reels-product_title" href="{{ block.settings.product.url }}">{{ block.settings.product.title }}</a>
                           <a class="video-reels-product_price" href="{{ block.settings.product.url }}">
                             <span>{{ block.settings.product.price | money_with_currency}}</span>
                             <span>{{ block.settings.product.compare_at_price | money_with_currency }}</span>
                           </a>
                        </div>
                        <div>
                          <a href="{{  block.settings.product.url }}" data-cc-quick-buy-look-bok>
                             <svg {{ shared_svg_attrs }} width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.63 17.47l-.6-11a.51.51 0 00-.5-.47h-2v-.43a3.5 3.5 0 00-7 0V6h-2a.51.51 0 00-.5.47l-.62 11a.49.49 0 00.49.53h12.3a.49.49 0 00.43-.53zm-12.31-.42L4.9 7h10.2l.56 10.1-11.34-.05zM7.5 5.57a2.5 2.5 0 115 0V6h-5v-.43z" fill="currentColor"></path></svg>
                          </a>
                        </div>
                      </div>
                      
                  {% endif %}
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
      
      <a href="#" class="swiper-button-prev" aria-label="{{ 'general.accessibility_labels.previous' | t | escape }}">{% render 'svg-chevron-left' %}</a>
      <a href="#" class="swiper-button-next " aria-label="{{ 'general.accessibility_labels.next' | t | escape }}">{% render 'svg-chevron-right' %}</a>
      <div class="swiper-pagination"></div>
      
    </div>
  </div>
</section>

<script src="https://unpkg.com/swiper@8/swiper-bundle.min.js"></script>
<script>
var TrandingSlider = new Swiper(".tranding-slider", {
    grabCursor: true,
    centeredSlides: true,
    loop: true,
    slidesPerView: "{{section.settings.slide_full}}",
   spaceBetween: 0,
breakpoints: {
  1200: {
    slidesPerView: {{ section.settings.slide_full }},
  },
  992: {
    slidesPerView: {{ section.settings.slide_992_1200 }},
  },
  768: {
    slidesPerView: {{ section.settings.slide_768_992 }},
  },
  576: {
    slidesPerView: 2,
  },
  0: {
    slidesPerView: 1.25,
  }
},
  
    coverflowEffect: {
      rotate: 0,
      stretch: 0,
      depth: 100,
      modifier: 2.5,
    },
    pagination: {
      el: ".swiper-pagination",
      clickable: true,
    },
    navigation: {
      nextEl: ".swiper-button-next",
      prevEl: ".swiper-button-prev",
    },
  });

</script>
<script>
  document.addEventListener("DOMContentLoaded", function () {

  
    
    function updateVideoPlayback() {
      let slides = document.querySelectorAll(".tranding-slide");

      slides.forEach(slide => {
        let video = slide.querySelector("video");

        if (!video) return; // Skip if no video found

        if (slide.classList.contains("swiper-slide-active")) {
          video.play();
        } else {
          video.pause();
          video.currentTime = 0; // Reset video when slide is inactive
        }
      });
    }

    // Observe class changes on each slide
    const observer = new MutationObserver(updateVideoPlayback);
    document.querySelectorAll(".tranding-slide").forEach(slide => {
      observer.observe(slide, { attributes: true, attributeFilter: ["class"] });
    });

    updateVideoPlayback(); // Initial check on page load
  });
</script>

{% schema %}
{
  "name": "Shoppable Video",
  "settings": [
    {
        "type": "text",
        "id": "title",
        "label": "Heading",
         "default": "Shoppable Videos"
    },
    {
      "type": "range",
      "id": "slide_full",
      "label": "slides in the contaniner above the 1200px screen",
      "min": 1,
      "max": 4,
      "step": 0.5,
      "default": 4
    },
    {
      "type": "range",
      "id": "slide_992_1200",
      "label": "slides in the contaniner between 992px to 1200px screen",
      "min": 1,
      "max": 4,
      "step": 0.5,
      "default": 3.5
    },
    {
      "type": "range",
      "id": "slide_768_992",
      "label": "slides in the contaniner between 768px to 992px screen",
      "min": 1,
      "max": 3,
      "step": 0.5,
      "default": 2.5
    }
  ],
  "blocks": [
    {
      "type": "video",
      "name": "Video",
      "settings": [
        {
          "type": "video",
          "id": "video",
          "label": "Video"
        },
        {
          "type": "product",
          "id": "product",
          "label": "Product"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Shoppable Video",
      "category": "Custom",
      "blocks": [
        { "type": "video" },
        { "type": "video" },
        { "type": "video" }
      ]
    }
  ]
}
{% endschema %}
